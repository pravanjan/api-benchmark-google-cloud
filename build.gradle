/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */


buildscript {      // Configuration for building
    repositories {
        maven {
            url "https://plugins.gradle.org/m2/"
        }
    }
    dependencies {
        classpath "com.github.jengelman.gradle.plugins:shadow:4.0.4"

    }
}

plugins {
    id 'com.gradle.build-scan' version '2.0.2'
    id 'org.springframework.boot' version '2.0.5.RELEASE'
    id 'io.spring.dependency-management' version '1.0.7.RELEASE'


}

subprojects {
    apply plugin: 'java'

    if (name.startsWith('spring')) {
        apply plugin: 'org.springframework.boot'
        apply plugin: 'io.spring.dependency-management'


        repositories {
            jcenter()
            mavenCentral()
        }
        dependencies {
            implementation 'org.springframework.boot:spring-boot-dependencies:2.0.5.RELEASE'
            implementation 'org.springframework.boot:spring-boot-starter-web'
            implementation group: 'org.springframework.boot', name: 'spring-boot-starter-jetty', version: '2.0.5.RELEASE'
            compile'org.springframework.boot:spring-boot-starter-webflux'

        }


    }

    if (name.startsWith('servlet')){
        apply plugin: 'application'
        apply plugin: "com.github.johnrengelman.shadow"
        repositories {
            jcenter()
            mavenCentral()
        }
        mainClassName = 'App'

        ext {
            jettyVersion = '9.4.24.v20191120'
        }
        dependencies {
            compile 'javax.servlet:javax.servlet-api:4.0.1'
            compile "org.eclipse.jetty:jetty-server:${jettyVersion}"
            compile "org.eclipse.jetty:jetty-servlet:${jettyVersion}"
            compile "org.eclipse.jetty:jetty-webapp:${jettyVersion}"
        }
    }

}

repositories {
    jcenter()
    mavenCentral()
}




